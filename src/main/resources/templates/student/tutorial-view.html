<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/base}">
<section layout:fragment="content" class="container py-5">
    <input type="hidden" id="tutorialId" th:value="${tutorial.id}"/>

    <h2 th:text="${tutorial.title}" class="mb-4"></h2>

    <!-- VIDEO -->
    <div th:if="${tutorial.type == 'VIDEO'}">
        <video width="100%" controls>
            <source th:src="@{${tutorial.filePath}}" type="video/mp4"/>
        </video>
    </div>

    <!-- PDF -->
    <div th:if="${tutorial.type == 'PDF'}">
        <iframe th:src="@{${tutorial.filePath}}"
                width="100%" height="600px"
                class="border"></iframe>
    </div>

    <!-- ARTICLE -->
    <div th:if="${tutorial.type == 'ARTICLE'}">
        <div class="p-3 border bg-light"
             th:utext="${tutorial.articleContent}">
        </div>
    </div>

    <!-- QUIZ -->
    <div th:if="${tutorial.type == 'QUIZ'}">
        <form id="quizForm" class="p-3 border">

            <div th:each="q : ${tutorial.quizQuestions}" class="mb-4">
                <h5 th:text="${q.question}"></h5>

                <div th:each="opt, idx : ${q.options}" class="form-check">
                    <input class="form-check-input"
                           type="radio"
                           th:name="${q.id}"
                           th:value="${idx.index}">
                    <label class="form-check-label" th:text="${opt}"></label>
                </div>
            </div>

            <button type="button" id="submitQuizBtn" class="btn btn-success">
                Submit Quiz
            </button>
        </form>
    </div>

    <!-- Completion Button -->
    <div class="mt-4">
        <button id="markCompleteBtn"
                th:if="${!progress.completed}"
                class="btn btn-primary">
            Mark as Completed
        </button>

        <span th:if="${progress.completed}" class="badge bg-success">
            Completed âœ”
        </span>
    </div>

</section>

<script src="/js/student-tutorial.js"></script>
</html>
