

<div th:fragment="students-list (studentsPage, students, courseId)">

    <table class="table glass-table text-white align-middle">
        <thead>
        <tr>
            <th>Student</th>
            <th>Email</th>
            <th>Progress</th>
            <th>Status</th>
            <th>Enrolled</th>
        </tr>
        </thead>

        <tbody>

        <tr th:each="s : ${students}" class="fade-in">
            <td>
                <i class="fas fa-user-circle me-2 text-info"></i>
                <span th:text="${s.user.username}"></span>
            </td>

            <td th:text="${s.user.email}"></td>

            <td>
                <div class="progress glass-progress">
                    <div class="progress-bar bg-info"
                         th:style="'width:' + ${s.progressPercentage} + '%'">
                    </div>
                </div>
                <small th:text="${s.progressPercentage + '%'}"></small>
            </td>

            <td>
                <span th:class="${s.completed} ? 'badge glass-badge-success' : 'badge glass-badge-warning' "
                      th:text="${s.completed ? 'Completed' : 'In Progress'}">
                </span>
            </td>

            <td th:text="${#temporals.format(s.enrollmentDate, 'dd MMM yyyy')}"></td>
        </tr>

        <tr th:if="${#lists.isEmpty(students)}">
            <td colspan="5" class="text-center text-white-50">
                <i class="fas fa-info-circle me-1"></i>No enrolled students yet.
            </td>
        </tr>

        </tbody>

    </table>
    <nav th:if="${studentsPage.totalPages > 1}" class="mt-3">
        <ul class="pagination pagination-aminah justify-content-center">

            <!-- Previous -->
            <li class="page-item" th:classappend="${studentsPage.number == 0} ? 'disabled'">
                <a class="page-link"
                   href="#"
                   th:data-page="${studentsPage.number - 1}"
                   th:onclick="'loadStudents(' + ${courseId} + ',' + (${studentsPage.number} - 1) + ')'">
                    &laquo;
                </a>
            </li>

            <!-- Page numbers -->
            <li th:each="i : ${#numbers.sequence(0, studentsPage.totalPages - 1)}"
                class="page-item"
                th:classappend="${i == studentsPage.number} ? 'active'">
                <a class="page-link"
                   href="#"
                   th:data-page="${i}"
                   th:text="${i + 1}"
                   th:onclick="'loadStudents(' + ${courseId} + ',' + ${i} + ')'">
                </a>
            </li>

            <!-- Next -->
            <li class="page-item" th:classappend="${studentsPage.number == studentsPage.totalPages - 1} ? 'disabled'">
                <a class="page-link"
                   href="#"
                   th:data-page="${studentsPage.number + 1}"
                   th:onclick="'loadStudents(' + ${courseId} + ',' + (${studentsPage.number} + 1) + ')'">
                    &raquo;
                </a>
            </li>

        </ul>
    </nav>
</div>
