<div th:fragment="sections-list">
    <div th:if="${#lists.isEmpty(sections)}" class="text-center py-3 text-muted">
        <i class="fas fa-layer-group me-1"></i>No sections added yet.
    </div>

    <ul class="list-group section-list" th:data-course-id="${courseId}" id="sectionList">
        <li th:each="section : ${sections}" class="list-group-item py-3 mb-2 rounded-3 shadow-sm fade-in"
    th:data-section-id="${section.id}">

            <div class="d-flex justify-content-between align-items-start">
                <div>
                    <h5 class="mb-1 fw-semibold">
                        <i class="fas fa-layer-group text-secondary me-2"></i>
                        <span th:text="${section.title}"></span>
                    </h5>

                    <small th:text="${section.description}" class="text-muted"></small>

                    <!-- Collapsible tutorials -->
                    <div class="mt-2 collapse" th:id="'tutorials-collapse-' + ${section.id}">
                        <div class="tutorial-wrapper" th:id="'tutorials-container-' + ${section.id}">
                            <div class="small text-muted text-center py-2">
                                <i class="fas fa-spinner fa-spin me-1"></i> Loading tutorials...
                            </div>
                        </div>
                    </div>
                </div>

                <div class="d-flex gap-1 flex-column flex-md-row mt-2 mt-md-0">
                    <button class="action-btn btn-toggle-tutorials" data-label="View Tutorials" th:data-section-id="${section.id}">
                        <i class="fas fa-eye me-1"></i>
                    </button>

                    <button class="action-btn btn-add-tutorial"  data-label="Add Tutorial" th:data-section-id="${section.id}">
                        <i class="fas fa-plus me-1"></i>
                    </button>

                    <button class="action-btn btn-edit-section"  data-label="Edit Section" th:data-section-id="${section.id}"
                            th:data-section-title="${section.title}" th:data-section-description="${section.description}">
                        <i class="fas fa-edit"></i>
                    </button>

                    <button class="action-btn btn-delete-section"  data-label="Delete Section" th:data-section-id="${section.id}">
                        <i class="fas fa-trash"></i>
                    </button>
                </div>
            </div>
        </li>
    </ul>

    <nav th:if="${totalPages > 1}" class="mt-2">
        <ul class="pagination pagination-aminah justify-content-center">

            <!-- Previous -->
            <li class="page-item" th:classappend="${page == 1} ? 'disabled'">
                <a class="page-link"
                   href="#"
                   th:data-page="${page - 1}"
                   th:onclick="'loadSections(' + ${courseId} + ',' + (${page} - 1) + ')'">
                    &laquo;
                </a>
            </li>

            <!-- Page Numbers -->
            <li th:each="i : ${#numbers.sequence(1, totalPages)}"
                class="page-item"
                th:classappend="${i == page} ? 'active'">
                <a class="page-link"
                   href="#"
                   th:data-page="${i}"
                   th:text="${i}"
                   th:onclick="'loadSections(' + ${courseId} + ',' + ${i} + ')'">
                </a>
            </li>

            <!-- Next -->
            <li class="page-item" th:classappend="${page == totalPages} ? 'disabled'">
                <a class="page-link"
                   href="#"
                   th:data-page="${page + 1}"
                   th:onclick="'loadSections(' + ${courseId} + ',' + (${page} + 1) + ')'">
                    &raquo;
                </a>
            </li>

        </ul>
    </nav>



</div>
